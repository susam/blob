function pushInfo(e){invokeModal(e,"Info")}function pushSuccess(e){invokeModal(e,"Success")}function pushWarn(e){invokeModal(e,"Warning")}function pushError(e){invokeModal(e,"Error")}function pushAttention(e){invokeModal(e,"Attention")}function showDrupalMessages(e){if(e){var t="";$.each(e,function(e,r){$.each(r,function(r,o){t+='<span class="message-'+e+'">'+o+"</span><br/>"})});pushInfo(t)}}function pushSmall(e,t,r){invokeGenericModal({id:"small-box",message:'<div class="ccl-font-p ccl-align-c ccl-margin-m">'+e+"</div>",closeCross:true,areAllAllowed:true,callback:t})}function pushErrorSmall(e,t){pushSmall(e,t,"error")}function pushSuccessSmall(e,t){pushSmall(e,t,"success")}function showInternetError(){var e=$("#small-box");if(is_empty_value(e)){var t=function(){if(navigator.onLine){$("#small-box_wrapper").remove();$("#small-box_background").remove();pushSuccessSmall("You're connected now!");setTimeout(function(){$("#small-box_wrapper").remove();$("#small-box_background").remove()},2e3)}else{setTimeout(t,2e3)}};pushErrorSmall("<span>You're offline. Trying to reconnect </span><img style='padding: 2px; vertical-align: middle;' src='https://cdn.codechef.com/misc/loader-icon.gif'/>",t)}}function getDecryptedValueFromLocalStorage(e,t){var r=window.localStorage;var o=CryptoJS.MD5(e).toString();var a=r.getItem(o);var n=null;if(a){n=CryptoJS.AES.decrypt(a,t).toString(CryptoJS.enc.Utf8)}return n}function clearEncryptedValueFromLocalStorage(e){var t=window.localStorage;var r=CryptoJS.MD5(e).toString();t.removeItem(r)}function setEncryptedValueInLocalStorage(e,t,r){var o=window.localStorage;var a=CryptoJS.MD5(e).toString();var n=CryptoJS.AES.encrypt(r,t);o.setItem(a,n)}function copyToClipboard(e){var t=document.createElement("textarea");t.innerHTML=document.querySelector(e).innerHTML;document.body.appendChild(t);t.select();document.execCommand("copy");document.body.removeChild(t)}function trackLoginNLogoutEvents(){$("#new-login-form").bind("submit",function(){setEncryptedValueInLocalStorage("CodeChef-Should-Send-Login-Event-To-WE","CodeChef-WE-Zindabad","1")});$("#button_google, #button_github, #button_facebook").bind("click",function(){setEncryptedValueInLocalStorage("CodeChef-Should-Send-Login-Event-To-WE","CodeChef-WE-Zindabad","1")});$("#logout-btn").bind("click",function(){webengage.user.logout()})}function sendLoginEventAndTrackPageView(){var e=getDecryptedValueFromLocalStorage("CodeChef-Should-Send-Login-Event-To-WE","CodeChef-WE-Zindabad");if(e){$.ajax({url:"/api/get-we-uid",success:function(e){e=typeof e==="string"?JSON.parse(e):e;if(e.is_logged_in){webengage.user.login(e.we_uid);clearEncryptedValueFromLocalStorage("CodeChef-Should-Send-Login-Event-To-WE");webengage.track("Page View",{})}}})}else{webengage.track("Page View",{})}}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function invokeModal(e,t){invokeGenericModal({id:t+"-modal",message:'<div class="ccl-font-h2 ccl-border-bottom ccl-padding-s ccl-margin-sm ccl-align-c">'+t+'</div><div class="ccl-font-p ccl-align-c ccl-margin-m">'+e+"</div>",closeCross:true,areAllAllowed:true})}var cCookie=function(e,t,r){if(typeof t!="undefined"){r=r||{};if(t===null){t="";r.expires=-1}var o="";if(r.expires&&(typeof r.expires=="number"||r.expires.toUTCString)){var a;if(typeof r.expires=="number"){a=new Date;a.setTime(a.getTime()+r.expires*24*60*60*1e3)}else{a=r.expires}o="; expires="+a.toUTCString()}var n=r.path?"; path="+r.path:"";var i=r.domain?"; domain="+r.domain:"";var s=r.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),o,n,i,s].join("")}else{var c=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var u=0;u<l.length;u++){var p=jQuery.trim(l[u]);if(p.substring(0,e.length+1)==e+"="){c=decodeURIComponent(p.substring(e.length+1));break}}}return c}};var cAjax=function(e){function t(e){try{var t=JSON.parse(e);if(t&&typeof t==="object"&&t!==null){return t}}catch(e){}return e}e["type"]=e["type"]?e["type"]:"GET";if(e["url"].indexOf("?")===-1&&e["type"]==="GET"){e["url"]=e["url"]+"?v="+Date.now()}if(!e.hasOwnProperty("csrfToken")||e.hasOwnProperty("csrfToken")&&e["csrfToken"]===""){e["csrfToken"]=window.csrfToken}var r={"x-csrf-token":e["csrfToken"]};if(e.hasOwnProperty("proctoring_token")&&e["proctoring_token"]){r["x-proctoring-token"]=e["proctoring_token"]}return $.ajax({dataType:e["dataType"]?e["dataType"]:"JSON",url:e["url"],headers:r,type:e["type"]?e["type"]:"GET",data:e["data"],retryCount:e["retryCount"]?e["retryCount"]:0,retryLimit:10,success:function(r){r=t(r);if(r.status==="rate_limit_exceeded"){window.location.reload()}else if(r.hasOwnProperty("status")&&r.hasOwnProperty("message")&&r.hasOwnProperty("redirect")){if(r["status"]=="error"&&r["message"]=="Session limit exceeded"&&location.pathname.indexOf(r["redirect"])!==0){(function(e){window.location.href=r["redirect"]+"?destination="+e.location.pathname.substr(1)})(window);return}}if(typeof e["success"]=="function"){e["success"](r)}},error:function(r){r=t(r);if(r.hasOwnProperty("status")&&r.hasOwnProperty("message")&&r.hasOwnProperty("redirect")){if(r["status"]=="error"&&r["message"]=="Session limit exceeded"&&location.pathname.indexOf(r["redirect"])!==0){(function(e){window.location.href=r["redirect"]+"?destination="+e.location.pathname.substr(1)})(window);return}}if(r.status>500&&this.retryCount<this.retryLimit){e["retryCount"]=e["retryCount"]?e["retryCount"]+1:1;setTimeout(function(){cAjax(e)},2e3)}else{if(typeof e["error"]=="function"){var o=t(r.responseText);e["error"](o)}}if(r.status==403){values=$.parseJSON(r.responseText);if(values.status=="apierror"){window.location.reload()}}}})};function handleCopySampleTest(e){var t=e.target;var r=$("#"+t.dataset.copyTargetId+"-ticked");t.style.display="none";r.show();setTimeout(function(){t.style.display="inline";r.hide()},1e3);copyToClipboard("#"+t.dataset.copyTargetId+" code")}var cacheClass=function(){var e=[];function t(e,t,r,o){return new cache(e,t,r,o)}return{getGlobalCache:function(e,t){return this.getInstance("1",e,t,true)},getInstance:function(r,o,a,n){var i=o;if(n&&n===true){i+="global"}else{i+=r}if(!e[i]){e[i]=t(r,o,a,n)}return e[i]}}}();function is_empty_value(e){if(typeof Ember==="undefined"){return typeof e==="undefined"||e===""}else{return Ember&&Ember.isEmpty(e)}}var cache=function(e,t,r,o){var a=window.localStorage;var n=CryptoJS.MD5(window.location.href.split("?")[0]+r);var i=e;if(o&&o===true){i="global"}var s=n+":"+i+":"+t+":";if(a){return{global:o,storage:a,cid:e,userkey:r,set:function(e,t,r){var o=(new Date).getTime()/1e3;r=r===undefined?0:r;if(!is_empty_value(t)){t={ttl:r,value:t,timestamp:o};t=JSON.stringify(t);t=CryptoJS.AES.encrypt(t,this.userkey);try{this.storage.setItem(s+e,t)}catch(e){if(e.code===22){}}}},update:function(e,t,r){var o=this.storage.getItem(s+e);if(o&&o.length>0){var a=CryptoJS.AES.decrypt(o,this.userkey).toString(CryptoJS.enc.Utf8);a=JSON.parse(a);var n=a.timestamp;if(!is_empty_value(t)){t={ttl:r,value:t,timestamp:n};t=JSON.stringify(t);t=CryptoJS.AES.encrypt(t,this.userkey);this.remove(e);this.storage.setItem(s+e,t)}}else{this.set(e,t,r)}},get:function(e){var t=(new Date).getTime()/1e3;var r=this.storage.getItem(s+e);if(r&&r.length>0){var o=CryptoJS.AES.decrypt(r,this.userkey).toString(CryptoJS.enc.Utf8);o=JSON.parse(o);if(o.ttl==0||t-o.timestamp<=o.ttl){return o.value}else{this.remove(e)}}return""},has:function(e){return this.get(e)?true:false},remove:function(e){var t=this.storage.getItem(s+e);if(t&&t.length>0){a.removeItem(s+e)}}}}else{return{global:o,storage:{},cid:e,userkey:r,uniqueCacheWrapperId:s,set:function(e,t,r){var o=(new Date).getTime()/1e3;r=r=="undefined"?0:r;if(!is_empty_value(t)){t={ttl:r,value:t,timestamp:o};t=JSON.stringify(t);t=CryptoJS.AES.encrypt(t,this.userkey).toString(CryptoJS.enc.Utf8);this.storage[this.uniqueCacheWrapperId+e]=t}},update:function(e,t,r){var o=this.storage[s+e];if(this.storage.hasOwnProperty(this.uniqueCacheWrapperId+e)){var a=CryptoJS.AES.decrypt(o,this.userkey).toString(CryptoJS.enc.Utf8);a=JSON.parse(a);var n=a.timestamp;if(!is_empty_value(t)){t={ttl:r,value:t,timestamp:n};t=JSON.stringify(t);t=CryptoJS.AES.encrypt(t,this.userkey);this.remove(e);this.storage[s+e]=t}}else{this.set(e,t,r)}},get:function(e){var t=(new Date).getTime()/1e3;if(this.storage.hasOwnProperty(this.uniqueCacheWrapperId+e)){var r=this.storage[this.uniqueCacheWrapperId+e];var o=CryptoJS.AES.decrypt(r,this.userkey).toString(CryptoJS.enc.Utf8);if(o.ttl==0||t-o.timestamp<=o.ttl){return this.storage[this.uniqueCacheWrapperId+e]}else{this.remove(e)}}return""},has:function(e){return this.get(e)?true:false},remove:function(e){if(this.storage.hasOwnProperty(this.uniqueCacheWrapperId+e)){delete this.storage[this.uniqueCacheWrapperId+e]}}}}};var clearUserCache=function(){cAjax({url:"/api/user/key",success:function(e){var t=e.key;var r=cacheClass.getGlobalCache("user",t);r.remove("user")}})};var showBrowserNotSupported=function(){$(document).ready(function(){var e='<!DOCTYPE html><html><head>\t<meta charset="utf-8">\t<meta http-equiv="X-UA-Compatible" content="IE=edge">\t<title>Your browser is not supported</title>\t<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet">\t<style>\t\t*{\t\t\tmargin: 0;\t\t\tpadding: 0;\t\t\tbox-sizing: border-box;\t\t}\t\tbody{\t\t\tbackground: #F8F8F8;\t\t\theight: 100vh;\t\t\tfont: 400 18px/1.6 "Open Sans", sans-serif;\t\t\tcolor: #4a4a4a;\t\t\tdisplay: flex;\t\t\tjustify-content: center;\t\t\talign-items: center;\t\t}\t\t.browserSupport__container {\t\t\tbackground: #fff;\t\t\twidth: 840px;\t\t\tbox-shadow: 2px 2px 8px 1px rgba(0,0,0,.1);\t\t\ttext-align: center;\t\t\tpadding: 100px 30px 0;\t\t\tposition: relative;\t\t\tborder-radius: 10px;            display: block;\t\t}\t\th1{\t\t\tposition: absolute;\t\t    top: -65px;\t\t    left: 50%;\t\t    transform: translateX(-50%);\t\t}\t\th2{\t\t\tfont-weight: 300;\t\t\tfont-size: 34px;\t\t\tmargin-bottom: 20px;\t\t}\t\tul{\t\t\tdisplay: flex;\t\t\tjustify-content: center;\t\t\tmargin: 30px 0 50px;\t\t}\t\tul li{\t\t\tlist-style: none;\t\t\tmargin-right: 50px;\t\t}\t\tul li:last-child{\t\t\tmargin-right: 0;\t\t}\t\tul li strong{\t\t\tdisplay: block;\t\t\tfont-size: 15px;\t\t}\t\tul li a:hover{\t\t\ttext-decoration: none;\t\t}        .campaign-visibility{            display: none;        }\t</style></head><body>\t<div class="browserSupport__container">\t\t<h1><img src="https://cdn.codechef.com/sites/all/themes/abessive/cc-logo.svg" alt="CodeChef" width="280"></h1>\t\t<h2>Uh Oh! We do not support this browser</h2>\t\t<p>CodeChef would not run on the browser you are using as it might disrupt some of its functionality. Please upgrade to one of the following modern browsers for a better experience.</p>\t\t<ul>\t\t\t<li>\t\t\t\t<a href="https://www.google.com/chrome/"><img src="https://github.com/alrra/browser-logos/blob/master/src/chrome/chrome_256x256.png?raw=true" alt="Google Chrome" width="80"><strong>Google Chrome</strong></a>\t\t\t</li>\t\t\t<li>\t\t\t\t<a href="https://www.mozilla.org/en-US/firefox/new/"><img src="https://github.com/alrra/browser-logos/blob/master/src/firefox/firefox_256x256.png?raw=true" alt="Mozilla Firefox" width="80"><strong>Mozilla Firefox</strong></a>\t\t\t</li>\t\t\t<li>\t\t\t\t<a href="https://www.opera.com/"><img src="https://github.com/alrra/browser-logos/blob/master/src/opera/opera_256x256.png?raw=true" alt="Opera" width="80"><strong>Opera</strong></a>\t\t\t</li>\t\t\t<li>\t\t\t\t<a href="http://www.apple.com/safari"><img src="https://github.com/alrra/browser-logos/blob/master/src/safari/safari_256x256.png?raw=true" alt="Safari" width="80"><strong>Mozilla Safari</strong></a>\t\t\t</li>\t\t</ul>\t</div></body></html>';document.open();document.write(e);document.close()})};var getUserKey=function(e){if(typeof Promise=="undefined"){showBrowserNotSupported()}else{return new Promise(function(t,r){var o=cCookie("userkey");e=!is_empty_value(e)?e:"";var a=function(){cAjax({url:e+"/api/user/key",success:function(e){cCookie("userkey",e.key,{expires:6e-4,path:"/"});t(e.key)},error:function(e){r(e)}})};if(o){t(o)}else{a()}})}};var campaigns=function(e){e=!is_empty_value(e)?e:"";cAjax({url:e+"/api/user/campaigns",success:function(e){if(e.data){var t=e.data;$.each(t,function(e,t){$("body").append('<div class="campaign-visibility">'+t+"</div>")})}}})};var showDrupalMessageModalGeneric=function(e,t){$(document).ready(function(){var r="modalbox-error-action"+Date.now();invokeGenericModal({message:e,closeCross:true,id:r,areAllAllowed:true,callback:t,args:r})})};var initialise_datatable=function(e,t,r,o,a,n,i,s,c){App=Ember.Application.create({rootElement:"#ember_root"});App.ApplicationRoute=Ember.Route.extend({setupController:function(t,r){var o={type:"GET",url:e,success:function(r){c.set(e,r,120);t.set("model",Ember.A(r));t.set("loading",false)}};if(c.has(e)){t.set("model",Ember.A(c.get(e)));t.set("loading",false)}else{var a="calling-"+e;if(!c.has(a)){c.set(a,true,3);cAjax(o,false,true)}}}});App.ApplicationController=Ember.ArrayController.extend(Ember.DataTableMixin,{staticProperties:t,headerAlias:Ember.Object.create(a),filters:i,queryParams:o,queryParamsEnabled:true,rowTemplate:r,itemsPerPage:n,sortProperties:s,loading:true});App.Router.map(function(){this.resource("application",{path:"/"})})};var load_datatable=function(e,t,r,o,a,n,i,s,c=["id"]){getUserKey().then(function(l){var u=cacheClass.getGlobalCache(e,l);initialise_datatable(t,r,o,a,n,i,s,c,u)},function(e){e=JSON.parse(e.responseText);if(!Ember.isEmpty(e.message)){pushError(e.message)}else{pushError("Some error occurred")}})};function addShowMoreLessFunctionality(){$(".more-less-content").hide();$(".more-less-button").remove();$(".more-less-content").after('<a class="more-less-toggle more">See more</a>');$(".more-less-toggle").unbind("click");$(".more-less-toggle").click(function(){$(this).text($(this).text()=="See more"?"See less":"See more");$(this).removeClass("more").removeClass("less").addClass($(this).text()=="See more"?"more":"less");$(this).prev(".more-less-content").slideToggle("fast")})}function getSearchParameters(){var e=window.location.search.substr(1);return e!=null&&e!=""?transformToAssocArray(e):{}}function transformToAssocArray(e){var t={};var r=e.split("&");for(var o=0;o<r.length;o++){var a=r[o].split("=");t[a[0]]=a[1]}return t}$(document).ready(function(){if(typeof webengage!=="undefined"){trackLoginNLogoutEvents();sendLoginEventAndTrackPageView()}campaigns();$('input[type="file"]').change(function(){var e=$(this).attr("data-supported-extensions").split(",");if(e.length){if($.inArray($(this).val().split(".").pop().toLowerCase(),e)==-1){$(this).val("");showDrupalMessageModal('<div class="messages error">File format not supported. Allowed formats are : '+e.join(", ")+"</div>")}else{var t=parseInt($(this).attr("data-file-size"));if(t){if(this.files[0].size>t){$(this).val("");showDrupalMessageModal('<div class="messages error">File size should be less than '+t/1024+" KB.</div>")}}}}})});function getProctoringTokenForContest(e){var t=window.localStorage;var r=CryptoJS.MD5("CodeChef-Proctoring-Token-"+e).toString();var o=t.getItem(r);var a=null;if(o){a=CryptoJS.AES.decrypt(o,e).toString(CryptoJS.enc.Utf8)}return a}function setProctoringTokenForContest(e,t){var r=window.localStorage;var o=CryptoJS.MD5("CodeChef-Proctoring-Token-"+e).toString();var a=CryptoJS.AES.encrypt(t,e);r.setItem(o,a)}function proctoringService(e,t,r,o){if(e.is_proctored&&e.is_user_verified_for_proctoring){var a={};a.recheckAfterFailureFrequency=1e4;a.recheckAfterSuccessFrequency=3e4;a.verificationCheckErrorAttempt=0;a.verificationFailureThreshold=3;a.clearCacheAndReload=function(e){if(r&&o){r.remove(o)}alert(e);window.location.reload()};a.checkVerificationStatus=function(){var e=getProctoringTokenForContest(t);$.ajax({url:"/api/proctoring/is-user-verified/"+t,beforeSend:function(t){t.setRequestHeader("x-proctoring-token",e)},error:function(e){a.verificationCheckErrorAttempt++;if(a.verificationCheckErrorAttempt>=a.verificationFailureThreshold){window.clearTimeout(a.verificationTimeoutId);a.clearCacheAndReload(JSON.parse(e.responseText).message||"An error occurred")}else{window.setTimeout(a.checkVerificationStatus,a.recheckAfterFailureFrequency)}},success:function(){a.verificationCheckErrorAttempt=0;window.setTimeout(a.checkVerificationStatus,a.recheckAfterSuccessFrequency)}})};a.setupProctoringCheck=function(){a.verificationTimeoutId=window.setTimeout(a.checkVerificationStatus,a.recheckAfterSuccessFrequency)};a.setupProctoringCheck()}}function addCaptchaRefreshButton(e){if($("#captcha-reload").length){$("#captcha-reload").remove()}var t='<button type="button" id="captcha-reload" class="small-refresh-button fa fa-refresh"></button>';$("#edit-captcha-response-wrapper").before(t);$("#captcha-reload").click(function(){var t="/captcha/refresh/"+e;$(".captcha img").attr("src","/em/components/cceditor/images/loader.gif");cAjax({url:t,success:function(e){if(e.status){$(".captcha img").attr("src",e.data.url);$("input[name=captcha_sid]").val(e.data.sid);$("input[name=captcha_token]").val(e.data.token)}else{alert(e.message)}},dataType:"json"});return false})}